#!/bin/bash
# uDESK service management helper

ROLE=$(udos-detect-role)
SERVICE_DIR="/usr/local/etc/init.d"

case "$1" in
    list)
        echo "Available services for role: $ROLE"
        find "$SERVICE_DIR" -name "*.md" -exec basename {} .md \;
        ;;
    start)
        if [ -z "$2" ]; then
            echo "Usage: udos-service start <service>"
            exit 1
        fi
        SERVICE_SCRIPT="$SERVICE_DIR/$2.sh"
        if [ -f "$SERVICE_SCRIPT" ]; then
            echo "Starting service: $2"
            "$SERVICE_SCRIPT" start
        else
            echo "Service not found: $2"
            exit 1
        fi
        ;;
    *)
        echo "Usage: udos-service {list|start} [service]"
        ;;
esac
